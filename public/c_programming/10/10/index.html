<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Caiyou Yuan&#39;s Pages</title>
<meta name="keywords" content="">
<meta name="description" content="计算概论（C语言）习题课讲义10 内容概要 习题讲解
指针
课堂练习
习题讲解 字典序输出所有排列 代码点评一:
#include &lt;stdio.h&gt; #define Nmax 100 void print(int A[], int n) { for(int i=0;i&lt;n;i&#43;&#43;) { printf(&#34;%d&#34;,A[i]); } printf(&#34;\n&#34;); } void swap(int A[], int m, int n) //交换两元素 { int tmp=A[m]; A[m]=A[n]; A[n]=tmp; } int next(int A[], int n) { int k,i; for(k=n-2;A[k]&gt;A[k&#43;1]&amp;&amp;k&gt;=0;k--); // Find first(right to left) A[k]&lt;A[k&#43;1] if(k&lt;0) return 0; // This means A[j]&gt;A[j&#43;1] for all j // Maximum in lexicographical order; for(i=n-1;A[k]&gt;A[i];i--); // Find minimal A[i]&gt;A[k] swap(A,k,i); // Exchange A[i] and A[k] //Sort A[k&#43;1]--A[n-1]; Any sort is OK; But Notice it&#39;s in reverse order k=k&#43;1,i=n-1; while(k&lt;i) { swap(A,k,i); k&#43;&#43;; i--; } return 1; } int main() { int A[Nmax], n; scanf(&#34;%d&#34;,&amp;n); for(int i=0;i&lt;n;i&#43;&#43;) { A[i]=i&#43;1; } do{ print(A,n); }while(next(A,n)); return 0; } 代码点评二:">
<meta name="author" content="Me">
<link rel="canonical" href="http://localhost:1313/c_programming/10/10/">
<meta name="google-site-verification" content="XYZabc">
<meta name="yandex-verification" content="XYZabc">
<meta name="msvalidate.01" content="XYZabc">
<link crossorigin="anonymous" href="/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css" integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z&#43;V9&#43;cO1A=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="apple-touch-icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="mask-icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/c_programming/10/10/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
  

<meta property="og:title" content="" />
<meta property="og:description" content="计算概论（C语言）习题课讲义10 内容概要 习题讲解
指针
课堂练习
习题讲解 字典序输出所有排列 代码点评一:
#include &lt;stdio.h&gt; #define Nmax 100 void print(int A[], int n) { for(int i=0;i&lt;n;i&#43;&#43;) { printf(&#34;%d&#34;,A[i]); } printf(&#34;\n&#34;); } void swap(int A[], int m, int n) //交换两元素 { int tmp=A[m]; A[m]=A[n]; A[n]=tmp; } int next(int A[], int n) { int k,i; for(k=n-2;A[k]&gt;A[k&#43;1]&amp;&amp;k&gt;=0;k--); // Find first(right to left) A[k]&lt;A[k&#43;1] if(k&lt;0) return 0; // This means A[j]&gt;A[j&#43;1] for all j // Maximum in lexicographical order; for(i=n-1;A[k]&gt;A[i];i--); // Find minimal A[i]&gt;A[k] swap(A,k,i); // Exchange A[i] and A[k] //Sort A[k&#43;1]--A[n-1]; Any sort is OK; But Notice it&#39;s in reverse order k=k&#43;1,i=n-1; while(k&lt;i) { swap(A,k,i); k&#43;&#43;; i--; } return 1; } int main() { int A[Nmax], n; scanf(&#34;%d&#34;,&amp;n); for(int i=0;i&lt;n;i&#43;&#43;) { A[i]=i&#43;1; } do{ print(A,n); }while(next(A,n)); return 0; } 代码点评二:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/c_programming/10/10/" />
<meta property="og:image" content="http://localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E" />
<meta property="article:section" content="c_programming" />

<meta property="og:site_name" content="Caiyou Yuan&#39;s Pages" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="http://localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E" />
<meta name="twitter:title" content=""/>
<meta name="twitter:description" content="计算概论（C语言）习题课讲义10 内容概要 习题讲解
指针
课堂练习
习题讲解 字典序输出所有排列 代码点评一:
#include &lt;stdio.h&gt; #define Nmax 100 void print(int A[], int n) { for(int i=0;i&lt;n;i&#43;&#43;) { printf(&#34;%d&#34;,A[i]); } printf(&#34;\n&#34;); } void swap(int A[], int m, int n) //交换两元素 { int tmp=A[m]; A[m]=A[n]; A[n]=tmp; } int next(int A[], int n) { int k,i; for(k=n-2;A[k]&gt;A[k&#43;1]&amp;&amp;k&gt;=0;k--); // Find first(right to left) A[k]&lt;A[k&#43;1] if(k&lt;0) return 0; // This means A[j]&gt;A[j&#43;1] for all j // Maximum in lexicographical order; for(i=n-1;A[k]&gt;A[i];i--); // Find minimal A[i]&gt;A[k] swap(A,k,i); // Exchange A[i] and A[k] //Sort A[k&#43;1]--A[n-1]; Any sort is OK; But Notice it&#39;s in reverse order k=k&#43;1,i=n-1; while(k&lt;i) { swap(A,k,i); k&#43;&#43;; i--; } return 1; } int main() { int A[Nmax], n; scanf(&#34;%d&#34;,&amp;n); for(int i=0;i&lt;n;i&#43;&#43;) { A[i]=i&#43;1; } do{ print(A,n); }while(next(A,n)); return 0; } 代码点评二:"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "C_Programmings",
      "item": "http://localhost:1313/c_programming/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "",
      "item": "http://localhost:1313/c_programming/10/10/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "",
  "name": "",
  "description": "计算概论（C语言）习题课讲义10 内容概要 习题讲解\n指针\n课堂练习\n习题讲解 字典序输出所有排列 代码点评一:\n#include \u0026lt;stdio.h\u0026gt; #define Nmax 100 void print(int A[], int n) { for(int i=0;i\u0026lt;n;i++) { printf(\u0026#34;%d\u0026#34;,A[i]); } printf(\u0026#34;\\n\u0026#34;); } void swap(int A[], int m, int n) //交换两元素 { int tmp=A[m]; A[m]=A[n]; A[n]=tmp; } int next(int A[], int n) { int k,i; for(k=n-2;A[k]\u0026gt;A[k+1]\u0026amp;\u0026amp;k\u0026gt;=0;k--); // Find first(right to left) A[k]\u0026lt;A[k+1] if(k\u0026lt;0) return 0; // This means A[j]\u0026gt;A[j+1] for all j // Maximum in lexicographical order; for(i=n-1;A[k]\u0026gt;A[i];i--); // Find minimal A[i]\u0026gt;A[k] swap(A,k,i); // Exchange A[i] and A[k] //Sort A[k+1]--A[n-1]; Any sort is OK; But Notice it\u0026#39;s in reverse order k=k+1,i=n-1; while(k\u0026lt;i) { swap(A,k,i); k++; i--; } return 1; } int main() { int A[Nmax], n; scanf(\u0026#34;%d\u0026#34;,\u0026amp;n); for(int i=0;i\u0026lt;n;i++) { A[i]=i+1; } do{ print(A,n); }while(next(A,n)); return 0; } 代码点评二:",
  "keywords": [
    
  ],
  "articleBody": "计算概论（C语言）习题课讲义10 内容概要 习题讲解\n指针\n课堂练习\n习题讲解 字典序输出所有排列 代码点评一:\n#include #define Nmax 100 void print(int A[], int n) { for(int i=0;i\u003cn;i++) { printf(\"%d\",A[i]); } printf(\"\\n\"); } void swap(int A[], int m, int n) //交换两元素 { int tmp=A[m]; A[m]=A[n]; A[n]=tmp; } int next(int A[], int n) { int k,i; for(k=n-2;A[k]\u003eA[k+1]\u0026\u0026k\u003e=0;k--); // Find first(right to left) A[k]",
  "wordCount" : "422",
  "inLanguage": "en",
  "image": "http://localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished": "0001-01-01T00:00:00Z",
  "dateModified": "0001-01-01T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "Me"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/c_programming/10/10/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Caiyou Yuan's Pages",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/%3Clink%20/%20abs%20url%3E"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Caiyou Yuan&#39;s Pages (Alt + H)">
                <img src="http://localhost:1313/yuan.jpg" alt="" aria-label="logo"
                    height="35">Caiyou Yuan&#39;s Pages</a>
            <div class="logo-switches">
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/posts/" title="Posts">
                    <span>Posts</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://localhost:1313/">Home</a>&nbsp;»&nbsp;<a href="http://localhost:1313/c_programming/">C_Programmings</a></div>
    <h1 class="post-title entry-hint-parent">
      
    </h1>
    <div class="post-meta">Me&nbsp;|&nbsp;<a href="https://github.com/caiyouy.github.io/content/C_Programming/10/10.md" rel="noopener noreferrer" target="_blank">Suggest Changes</a>

</div>
  </header> 
  <div class="post-content"><h1 id="计算概论c语言习题课讲义10">计算概论（C语言）习题课讲义10<a hidden class="anchor" aria-hidden="true" href="#计算概论c语言习题课讲义10">#</a></h1>
<h2 id="内容概要">内容概要<a hidden class="anchor" aria-hidden="true" href="#内容概要">#</a></h2>
<ul>
<li>
<p>习题讲解</p>
</li>
<li>
<p>指针</p>
</li>
<li>
<p>课堂练习</p>
</li>
</ul>
<h3 id="习题讲解">习题讲解<a hidden class="anchor" aria-hidden="true" href="#习题讲解">#</a></h3>
<h4 id="字典序输出所有排列">字典序输出所有排列<a hidden class="anchor" aria-hidden="true" href="#字典序输出所有排列">#</a></h4>
<p>代码点评一:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#define Nmax 100
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">print</span><span class="p">(</span><span class="kt">int</span> <span class="n">A</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">n</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;%d&#34;</span><span class="p">,</span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">swap</span><span class="p">(</span><span class="kt">int</span> <span class="n">A</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">m</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="c1">//交换两元素
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">tmp</span><span class="o">=</span><span class="n">A</span><span class="p">[</span><span class="n">m</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="n">A</span><span class="p">[</span><span class="n">m</span><span class="p">]</span><span class="o">=</span><span class="n">A</span><span class="p">[</span><span class="n">n</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="n">A</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">=</span><span class="n">tmp</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">next</span><span class="p">(</span><span class="kt">int</span> <span class="n">A</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">k</span><span class="p">,</span><span class="n">i</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span><span class="p">(</span><span class="n">k</span><span class="o">=</span><span class="n">n</span><span class="o">-</span><span class="mi">2</span><span class="p">;</span><span class="n">A</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">&gt;</span><span class="n">A</span><span class="p">[</span><span class="n">k</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">&amp;&amp;</span><span class="n">k</span><span class="o">&gt;=</span><span class="mi">0</span><span class="p">;</span><span class="n">k</span><span class="o">--</span><span class="p">);</span> <span class="c1">// Find first(right to left) A[k]&lt;A[k+1]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span><span class="p">(</span><span class="n">k</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// This means A[j]&gt;A[j+1] for all j
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                      <span class="c1">// Maximum in lexicographical order;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span><span class="n">A</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">&gt;</span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">];</span><span class="n">i</span><span class="o">--</span><span class="p">);</span> <span class="c1">// Find minimal A[i]&gt;A[k]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nf">swap</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">k</span><span class="p">,</span><span class="n">i</span><span class="p">);</span> <span class="c1">// Exchange A[i] and A[k]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//Sort A[k+1]--A[n-1]; Any sort is OK; But Notice it&#39;s in reverse order
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">k</span><span class="o">=</span><span class="n">k</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">i</span><span class="o">=</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span><span class="p">(</span><span class="n">k</span><span class="o">&lt;</span><span class="n">i</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nf">swap</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">k</span><span class="p">,</span><span class="n">i</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">k</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">i</span><span class="o">--</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">A</span><span class="p">[</span><span class="n">Nmax</span><span class="p">],</span> <span class="n">n</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nf">scanf</span><span class="p">(</span><span class="s">&#34;%d&#34;</span><span class="p">,</span><span class="o">&amp;</span><span class="n">n</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">n</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">=</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">do</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nf">print</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">n</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span><span class="k">while</span><span class="p">(</span><span class="nf">next</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">n</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>代码点评二:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#include</span><span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="kt">int</span> <span class="n">a</span><span class="p">[</span><span class="mi">50</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="n">b</span><span class="p">[</span><span class="mi">50</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="n">num0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">prt</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">[],</span><span class="kt">int</span> <span class="n">num</span><span class="p">){</span><span class="c1">//递归
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="n">num</span><span class="o">==</span><span class="mi">1</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">num0</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">!=</span><span class="mi">0</span><span class="p">)</span><span class="n">j</span><span class="o">=</span><span class="n">i</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">b</span><span class="p">[</span><span class="n">num0</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">num0</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">            <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;%d&#34;</span><span class="p">,</span><span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">num0</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">            <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">b</span><span class="p">[</span><span class="n">num0</span><span class="o">-</span><span class="n">num</span><span class="p">]</span><span class="o">=</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nf">prt</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">num</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="nf">scanf</span><span class="p">(</span><span class="s">&#34;%d&#34;</span><span class="p">,</span><span class="o">&amp;</span><span class="n">num0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">num0</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nf">prt</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">num0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>代码点评三:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="c1">// Depth First Search
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="kt">int</span> <span class="n">a</span><span class="p">[</span><span class="mi">50</span><span class="p">],</span><span class="n">book</span><span class="p">[</span><span class="mi">50</span><span class="p">],</span><span class="n">n</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">dfs</span><span class="p">(</span><span class="kt">int</span> <span class="n">tnt</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="p">(</span><span class="n">tnt</span><span class="o">==</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;=</span><span class="n">n</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">            <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;%d&#34;</span><span class="p">,</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">        <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;=</span><span class="n">n</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span><span class="p">(</span><span class="n">book</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span> <span class="c1">// 找到还没有用过的最小数字
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">a</span><span class="p">[</span><span class="n">tnt</span><span class="p">]</span><span class="o">=</span><span class="n">i</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">book</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nf">dfs</span><span class="p">(</span><span class="n">tnt</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">book</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nf">scanf</span><span class="p">(</span><span class="s">&#34;%d&#34;</span><span class="p">,</span><span class="o">&amp;</span><span class="n">n</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nf">dfs</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h3 id="指针">指针<a hidden class="anchor" aria-hidden="true" href="#指针">#</a></h3>
<h4 id="什么是指针">什么是指针<a hidden class="anchor" aria-hidden="true" href="#什么是指针">#</a></h4>
<p>指针是一个变量，其值为另一个变量的地址.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="kt">int</span>    <span class="o">*</span><span class="n">ip</span><span class="p">;</span>    <span class="cm">/* 一个整型的指针 */</span>
</span></span><span class="line"><span class="cl"><span class="kt">double</span> <span class="o">*</span><span class="n">dp</span><span class="p">;</span>    <span class="cm">/* 一个 double 型的指针 */</span>
</span></span><span class="line"><span class="cl"><span class="kt">float</span>  <span class="o">*</span><span class="n">fp</span><span class="p">;</span>    <span class="cm">/* 一个浮点型的指针 */</span>
</span></span><span class="line"><span class="cl"><span class="kt">char</span>   <span class="o">*</span><span class="n">cp</span><span class="p">;</span>     <span class="cm">/* 一个字符型的指针 */</span>
</span></span></code></pre></div><p>所有指针的值的实际数据类型，其实都是一样的，都是一个代表内存地址的长整数。不同数据类型的指针之间唯一不同是，指针所指向的变量或常量的数据类型不同。</p>
<p><em>演示: 不同类型指针间的异同</em></p>
<p>指针的使用, 大体上和其他变量的使用相同. 需要特别注意的是, <code>&amp;</code>取地址运算符以及<code>*</code>间接访问运算符. 这两个运算符,可以看作是互逆运算.</p>
<h4 id="特殊的null指针">特殊的<code>NULL</code>指针<a hidden class="anchor" aria-hidden="true" href="#特殊的null指针">#</a></h4>
<p><em>演示: NULL指针的地址</em></p>
<p>在大多数的操作系统上，内存地址0有特别重要的意义，所以按照惯例，如果指针包含空值（零值），则假定它不指向任何东西。</p>
<h4 id="指针的算术运算">指针的算术运算<a hidden class="anchor" aria-hidden="true" href="#指针的算术运算">#</a></h4>
<p>我们可以对指针进行这样四种算数运算: <code>++</code>、<code>--</code>、<code>+</code>、<code>-</code>; 这代表这地址的增加或减少.</p>
<p><strong>问题: 指针加1,表示内存地址加1?</strong></p>
<p>内存的基本单位是字节, 而指针加一不同于地址加一. 指针加一,地址增加多少需要具体根据指针的类型.</p>
<p><em>演示: 指针加一,地址加几?</em></p>
<h4 id="指向指针的指针">指向指针的指针<a hidden class="anchor" aria-hidden="true" href="#指向指针的指针">#</a></h4>
<p>一个指向指针的指针变量必须如下声明，即在变量名前放置两个星号。例如，下面声明了一个指向 int 类型指针的指针：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="kt">int</span> <span class="o">**</span><span class="n">var</span><span class="p">;</span>
</span></span></code></pre></div><p>当一个目标值被一个指针间接指向到另一个指针时，访问这个值需要使用两个星号运算符，如下面实例所示：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">   <span class="kt">int</span>  <span class="n">var</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">   <span class="kt">int</span>  <span class="o">*</span><span class="n">ptr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">   <span class="kt">int</span>  <span class="o">**</span><span class="n">pptr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   <span class="n">var</span> <span class="o">=</span> <span class="mi">3000</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   <span class="cm">/* 获取 var 的地址 */</span>
</span></span><span class="line"><span class="cl">   <span class="n">ptr</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">var</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   <span class="cm">/* 使用运算符 &amp; 获取 ptr 的地址 */</span>
</span></span><span class="line"><span class="cl">   <span class="n">pptr</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">ptr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   <span class="cm">/* 使用 pptr 获取值 */</span>
</span></span><span class="line"><span class="cl">   <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;Value of var = %d</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">var</span> <span class="p">);</span>
</span></span><span class="line"><span class="cl">   <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;Value available at *ptr = %d</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="o">*</span><span class="n">ptr</span> <span class="p">);</span>
</span></span><span class="line"><span class="cl">   <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;Value available at **pptr = %d</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="o">**</span><span class="n">pptr</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h4 id="指针做为函数参数">指针做为函数参数<a hidden class="anchor" aria-hidden="true" href="#指针做为函数参数">#</a></h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="c1">//指针可以做为函数参数,以及返回值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">int</span> <span class="o">*</span><span class="nf">myFunction</span><span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="n">a</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>指针做为函数的参数时, 地址的&quot;值传递&quot;,导致了所指向元素的实际改变. 典型的例子, 使用指针做为参数交换两个整数,确实会交换两个整数.</p>
<p>指针做为函数的返回值时, <em>C语言不支持在调用函数时返回局部变量的地址，除非定义局部变量为static变量.</em> 这是为什么?? (考虑内存释放)</p>
<p>使用指针做为函数返回值的典例: 动态分配内存函数.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="c1">// 使用动态内存的一般做法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="o">*</span><span class="n">ip</span><span class="o">=</span><span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="p">)</span><span class="nf">malloc</span><span class="p">(</span><span class="n">N</span><span class="o">*</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="nf">free</span><span class="p">(</span><span class="n">fp</span><span class="p">);</span>
</span></span></code></pre></div><h4 id="指针和数组的关系">指针和数组的关系<a hidden class="anchor" aria-hidden="true" href="#指针和数组的关系">#</a></h4>
<p>数组名, 可以看做是一个指针, 它指向数组首个元素. 它和一般指针的区别在于: 它是一个常值, 即对它<code>++</code>或<code>--</code>是非法的.</p>
<p>更特殊的, <code>a[i]</code> 等价于 <code>*(a+i)</code>. 这也解释了, 为什么如下代码也是正确的了.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">a</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="o">=</span><span class="p">{</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;%d</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span><span class="mi">0</span><span class="p">[</span><span class="n">a</span><span class="p">]);</span> <span class="c1">// 数组名和下标调换了位置
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;%d</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span><span class="mi">1</span><span class="p">[</span><span class="n">a</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>对于<em>二维数组</em>呢? 二维数组的数组名相当于?</p>
<p>二维数组的数组名, 也是一个常指针(类型为int **,对于整型二维数组), 指向数组的首个元素;</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">B</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span><span class="o">=</span><span class="p">{{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">},{</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">}};</span>
</span></span><span class="line"><span class="cl">    <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;%d</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span><span class="o">**</span><span class="n">B</span><span class="p">);</span> <span class="o">/</span><span class="err">为什么这里需要两个</span><span class="o">**</span>
</span></span><span class="line"><span class="cl">    <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;B[0][4]: %d</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span><span class="n">B</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">3</span><span class="p">]);</span> <span class="c1">//并不报错
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>实际上, <code>B[i]</code>是一个指针数组, <code>B[i][j]</code> 相当于 <code>*(*(B+i)+j)</code>;
其中, <code>+j</code>内存地址加多少, 根据的是数组元素的类型; 但<code>+i</code>时内存地址的变化,实际上是<code>i*(j*sizeof(int))</code>. 这也是为什么二维数组的定义时,必须给定第二个维度大小的原因.</p>
<p><em>演示: 二维数组解析</em></p>
<h3 id="课堂练习">课堂练习<a hidden class="anchor" aria-hidden="true" href="#课堂练习">#</a></h3>
<p>根据上述二维数组和指针间的关系, 使用<code>malloc</code>函数动态生成一个二维数组.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2024 <a href="http://localhost:1313/">Caiyou Yuan&#39;s Pages</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
</body>

</html>
